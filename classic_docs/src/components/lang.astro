---
import type { Props } from "@astrojs/starlight/props";
import Default from "@astrojs/starlight/components/LanguageSelect.astro";

const isAnnouncements = Astro.props.slug === "announcements" || Astro.props.slug === "download";
---

<script>
  const search = window.location.search;

  const map = {
    "?en": 0,
    "?es": 1,
    "?hi": 2,
  };

  // @ts-ignore
  if (map[search] && window.location.pathname.includes("announcements")) {
    // @ts-ignore
    const e = document.querySelector(`select[value="${window.location.pathname}"]`);

    // @ts-ignore
    e.selectedIndex = map[search];
  }
</script>

{
  isAnnouncements ? (
    <></>
  ) : (
    <Default {...Astro.props}>
      <slot />
    </Default>
  )
}
